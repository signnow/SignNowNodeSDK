<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">lib/document/index.js | SignNow API client</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-custom.css"><meta name="description" content="SignNow REST Service Wrapper"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="SignNow API client"><meta property="twitter:description" content="SignNow REST Service Wrapper"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.svg" style="width:34px;"></a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/signnow/SignNowNodeSDK"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-init">init</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ApiError">ApiError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ApiErrorResponse">ApiErrorResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Features">Features</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-InitParams">InitParams</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#document">document</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/document/index.js~Document.html">Document</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-AttachmentField">AttachmentField</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-CalculatedField">CalculatedField</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-CancelFreeformInviteParams">CancelFreeformInviteParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-CancelFreeformInviteResponse">CancelFreeformInviteResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-CheckField">CheckField</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentCreateParams">DocumentCreateParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentCreateResponse">DocumentCreateResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentDownloadOptions">DocumentDownloadOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentDownloadParams">DocumentDownloadParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentDownloadResponse">DocumentDownloadResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentEvent">DocumentEvent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentFieldExtractParams">DocumentFieldExtractParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentFieldExtractResponse">DocumentFieldExtractResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentFieldInviteCancelParams">DocumentFieldInviteCancelParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentFieldInviteCancelResponse">DocumentFieldInviteCancelResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentFieldInviteResponse">DocumentFieldInviteResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentFields">DocumentFields</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentFreeformInviteResponse">DocumentFreeformInviteResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentHistoryParams">DocumentHistoryParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentHistoryResponse">DocumentHistoryResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentInviteOptions">DocumentInviteOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentInviteParams">DocumentInviteParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentInviteResponse">DocumentInviteResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentInviteSettings">DocumentInviteSettings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentListItem">DocumentListItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentListParams">DocumentListParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentListResponse">DocumentListResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentMergeOptions">DocumentMergeOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentMergeParams">DocumentMergeParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentMergeResponse">DocumentMergeResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentRemoveOptions">DocumentRemoveOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentRemoveParams">DocumentRemoveParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentRemoveResponse">DocumentRemoveResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentShareParams">DocumentShareParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentShareResponse">DocumentShareResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentThumbnails">DocumentThumbnails</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentUpdateParams">DocumentUpdateParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentUpdateResponse">DocumentUpdateResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentViewParams">DocumentViewParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentViewResponse">DocumentViewResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-EnumerationField">EnumerationField</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-FormulaTree">FormulaTree</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-FormulaTreeBranch">FormulaTreeBranch</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-FormulaTreeBranchTerminator">FormulaTreeBranchTerminator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-InitialsField">InitialsField</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RadioButton">RadioButton</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RadioButtonField">RadioButtonField</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SignatureField">SignatureField</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SignerSettings">SignerSettings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TextField">TextField</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#document-group">document-group</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/document-group/index.js~DocumentGroup.html">DocumentGroup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupCreateParams">DocumentGroupCreateParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupCreateResponse">DocumentGroupCreateResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupInviteAction">DocumentGroupInviteAction</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupInviteAuthenticationPassword">DocumentGroupInviteAuthenticationPassword</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupInviteAuthenticationPhoneCall">DocumentGroupInviteAuthenticationPhoneCall</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupInviteAuthenticationPhoneSMS">DocumentGroupInviteAuthenticationPhoneSMS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupInviteCompletionEmailConfig">DocumentGroupInviteCompletionEmailConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupInviteEmail">DocumentGroupInviteEmail</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupInviteParams">DocumentGroupInviteParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupInviteResponse">DocumentGroupInviteResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupInviteSettings">DocumentGroupInviteSettings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupInviteStep">DocumentGroupInviteStep</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupItem">DocumentGroupItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupViewParams">DocumentGroupViewParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupViewResponse">DocumentGroupViewResponse</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#document-group-template">document-group-template</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/document-group-template/index.js~DocumentGroupTemplate.html">DocumentGroupTemplate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateCreateParams">DocumentGroupTemplateCreateParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateCreateResponse">DocumentGroupTemplateCreateResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateInviteAction">DocumentGroupTemplateInviteAction</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateInviteEmail">DocumentGroupTemplateInviteEmail</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateInviteParams">DocumentGroupTemplateInviteParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateInviteResponse">DocumentGroupTemplateInviteResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateInviteStep">DocumentGroupTemplateInviteStep</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateItem">DocumentGroupTemplateItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateRoutingDetails">DocumentGroupTemplateRoutingDetails</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateViewParams">DocumentGroupTemplateViewParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-DocumentGroupTemplateViewResponse">DocumentGroupTemplateViewResponse</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#link">link</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/link/index.js~Link.html">Link</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SigningLinkCreateParams">SigningLinkCreateParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SigningLinkCreateResponse">SigningLinkCreateResponse</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#oauth2">oauth2</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/oauth2/index.js~OAuth2.html">OAuth2</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-AccessTokenGetParams">AccessTokenGetParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-AccessTokenGetResponse">AccessTokenGetResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-AccessTokenRefreshParams">AccessTokenRefreshParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-AccessTokenRefreshResponse">AccessTokenRefreshResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-AccessTokenVerifyParams">AccessTokenVerifyParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-AccessTokenVerifyResponse">AccessTokenVerifyResponse</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#template">template</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/template/index.js~Template.html">Template</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TemplateCreateOptions">TemplateCreateOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TemplateCreateParams">TemplateCreateParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TemplateCreateResponse">TemplateCreateResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TemplateDuplicateParams">TemplateDuplicateParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TemplateDuplicateResponse">TemplateDuplicateResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TemplateInviteParams">TemplateInviteParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TemplateInviteResponse">TemplateInviteResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TemplateRemoveParams">TemplateRemoveParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TemplateRemoveResponse">TemplateRemoveResponse</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#user">user</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/user/index.js~User.html">User</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserCreateParams">UserCreateParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserCreateResponse">UserCreateResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserGetParams">UserGetParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserGetResponse">UserGetResponse</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">lib/document/index.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;
const https = require(&apos;https&apos;);
const fs = require(&apos;fs&apos;);
const {
  responseHandler,
  errorHandler,
  buildRequestOptions,
  stringifyQueryParams,
} = require(&apos;../common&apos;);
const { promisify } = require(&apos;../../utils&apos;);

// build file multipart/form-data request
const buildFileRequest = (boundaryKey, mimeType, filename) =&gt; {
  let req = `------FormBoundary${boundaryKey}\r\n`;
  req += `Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;${filename}&quot;\r\n`;
  req += `Content-Type: ${mimeType}\r\n\r\n`;
  return req;
};

// get file mime type
const getMimeType = path =&gt; {
  const extTypes = {
    doc: &apos;application/msword&apos;,
    docx: &apos;application/vnd.openxmlformats-officedocument.wordprocessingml.document&apos;,
    pdf: &apos;application/pdf&apos;,
    odt: &apos;application/vnd.oasis.opendocument.text&apos;,
    rtf: &apos;application/rtf&apos;,
    xml: &apos;application/xml&apos;,
    xls: &apos;application/vnd.ms-excel&apos;,
    xlsx: &apos;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&apos;,
    ppt: &apos;application/vnd.ms-powerpoint&apos;,
    pptx: &apos;application/vnd.openxmlformats-officedocument.presentationml.presentation&apos;,
    png: &apos;image/png&apos;,
    jpg: &apos;image/jpeg&apos;,
    jpeg: &apos;image/jpeg&apos;,
    gif: &apos;image/gif&apos;,
    bmp: &apos;image/bmp&apos;,
  };
  const pathExtension = path.substr(path.lastIndexOf(&apos;.&apos;)).replace(&apos;.&apos;, &apos;&apos;);
  return extTypes[pathExtension.toLowerCase()] || null;
};

// get filename from path
const getFileName = path =&gt; {
  if (path.lastIndexOf(&apos;/&apos;) !== -1) {
    return path.substr(path.lastIndexOf(&apos;/&apos;)).replace(&apos;/&apos;, &apos;&apos;);
  } else {
    return path;
  }
};

// generate randon string
const randString = x =&gt; {
  let s = &apos;&apos;;
  while (s.length &lt; x &amp;&amp; x &gt; 0) {
    const r = Math.random();
    s += (r &lt; 0.1 ? Math.floor(r * 100) : String.fromCharCode(Math.floor(r * 26) + (r &gt; 0.5 ? 97 : 65)));
  }
  return s;
};

/**
 * Document methods
 */
class Document {

  /**
   * Create document payload
   * @typedef {Object} DocumentCreateParams
   * @property {string} filepath - path to file to be uploaded
   * @property {string} token - your auth token
   */

  /**
   * Create document response data
   * @typedef {Object} DocumentCreateResponse
   * @property {string} id - an id of created document
   */

  /**
   * Uploads a file and creates a document.
   * This endpoint accepts .pdf, .doc, .docx, .odt, .rtf, .png, .jpg, .jpeg, .gif, .bmp, .xml, .xls, .xlsx, .ppt, .pptx file types
   * @param {DocumentCreateParams} data - create document payload
   * @param {function(err: ApiErrorResponse, res: DocumentCreateResponse)} [callback] - error first node.js callback
   */
  static create ({ filepath, token }, callback) {
    const boundaryKey = randString(30);
    const filename = getFileName(filepath);

    // check mimetype
    const mimeType = getMimeType(filepath);

    if (!mimeType) {
      callback(&apos;File type isn\&apos;t supported.&apos;);
      return;
    }

    const file = buildFileRequest(boundaryKey, mimeType, filename);
    const stat = fs.statSync(filepath);
    const reader = fs.createReadStream(filepath, { bufferSize: 64 * 1024 });
    const closingLine = `\r\n------FormBoundary${boundaryKey}--`;
    const req = https
      .request(buildRequestOptions({
        method: &apos;POST&apos;,
        path: &apos;/document&apos;,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
        headers: {
          &apos;Content-Type&apos;: `multipart/form-data; boundary=----FormBoundary${boundaryKey}`,
          &apos;Content-Length&apos;: stat.size + file.toString().length + closingLine.length,
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback));

    req.write(file);
    reader.on(&apos;end&apos;, () =&gt; {
      reader.unpipe(req);
      req.end(closingLine);
    });

    // pipe the file and append a closing line
    reader.pipe(req, { end: false });
  }

  /**
   * Upload document with field extract payload
   * @typedef {Object} DocumentFieldExtractParams
   * @property {string} filepath - path to file to be uploaded
   * @property {string} token - your auth token
   */

  /**
   * Upload document with field extract response data
   * @typedef {Object} DocumentFieldExtractResponse
   * @property {string} id - an id of created document
   */

  /**
   * Uploads a file that contains SignNow Document Field Tags.
   * This endpoint only accepts .pdf (you may convert the document from .doc or .docx to .pdf)
   * @param {DocumentFieldExtractParams} data - upload document with field extract payload
   * @param {function(err: ApiErrorResponse, res: DocumentFieldExtractResponse)} [callback] - error first node.js callback
   */
  static fieldextract ({ filepath, token }, callback) {
    const boundaryKey = randString(30);
    const filename = getFileName(filepath);

    // check mimetype
    const mimeType = getMimeType(filepath);

    if (!mimeType) {
      callback(&apos;File type isn\&apos;t supported.&apos;);
      return;
    }

    const file = buildFileRequest(boundaryKey, mimeType, filename);
    const stat = fs.statSync(filepath);
    const reader = fs.createReadStream(filepath, { bufferSize: 64 * 1024 });
    const closingLine = `\r\n------FormBoundary${boundaryKey}--`;

    const req = https
      .request(buildRequestOptions({
        method: &apos;POST&apos;,
        path: &apos;/document/fieldextract&apos;,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
        headers: {
          &apos;Content-Type&apos;: `multipart/form-data; boundary=----FormBoundary${boundaryKey}`,
          &apos;Content-Length&apos;: stat.size + file.toString().length + closingLine.length,
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback));

    req.write(file);
    reader.on(&apos;end&apos;, () =&gt; {
      reader.unpipe(req);
      req.end(closingLine);
    });

    // pipe the file and append a closing line
    reader.pipe(req, { end: false });
  }


  /**
   * Payload to receive user&apos;s document list
   * @typedef {Object} DocumentListParams
   * @property {string} token - your auth token
   */

  /**
   * Document list response item
   * @typedef {Object} DocumentListItem
   * @property {string} id - id of specific document
   * @property {string} user_id - id of user that uploaded document
   * @property {string} document_name - name of document
   * @property {string} page_count - amount of pages in the document
   * @property {string} created - timestamp document was created
   * @property {string} updated - timestamp document was updated
   * @property {string} original_filename - original filename with document format (.pdf, .doc, etc...)
   * @property {?string} origin_document_id - an id of original document (if document is a copy)
   * @property {string} owner - email of document owner
   * @property {boolean} template - is document a template or not
   * @property {?string} origin_user_id - id of user who created document
   * @property {DocumentThumbnails} thumbnail - thumbnail urls with different sizes (small, medium, large)
   * @property {Object[]} signatures - signature signed elements
   * @property {Object[]} texts - text and enumeration filled elements
   * @property {Object[]} checks - checkbox checked elements
   * @property {Object[]} tags - field types document contains
   * @property {Object[]} fields - all document fillable fields
   * @property {Object[]} requests - requests for signing document
   * @property {Object[]} roles - document signer roles
   * @property {Object[]} field_invites - sent invites data
   * @property {number} version_time - document updated timestamp
   * @property {Object[]} enumeration_options - dropdown options
   * @property {Object[]} attachments - attachments in document
   * @property {Object[]} routing_details - signing steps routing details
   * @property {Object[]} integrations - document integrations
   * @property {Object[]} hyperlinks - document hyperlinks
   * @property {Object[]} radiobuttons - checked radiobuttons after document was signed
   * @property {Object[]} document_group_template_info - document group templates data
   * @property {Object[]} document_group_info - document group template&apos;s data
   * @property {Object[]} originator_organization_settings - specific organization settings for document
   * @property {Object[]} field_validators - validation rules for fields (date fields, payment fields etc.)
   * @property {Object} settings - specific document settings
   */

  /**
   * User&apos;s Document list response
   * @typedef {DocumentListItem[]} DocumentListResponse
   */

  /**
   * Retrieve user&apos;s document list
   * @param {DocumentListParams} data - payload to receive user&apos;s document list
   * @param {function(err: ApiErrorResponse, res: DocumentListItem)} [callback] - error first node.js callback
   */
  static list ({ token }, callback) {
    https
      .request(buildRequestOptions({
        method: &apos;GET&apos;,
        path: &apos;/user/documentsv2&apos;,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback))
      .end();
  }

  /**
   * Document view payload
   * @typedef {Object} DocumentViewParams
   * @property {string} id - id of specific document
   * @property {string} token - your auth token
   */

  /**
   * Document thumbnail urls with different sizes (small, medium, large)
   * @typedef {Object} DocumentThumbnails
   * @property {string} large
   * @property {string} medium
   * @property {string} small
   */

  /**
   * Document view response of specific document
   * @typedef {Object} DocumentViewResponse
   * @property {string} id - id of specific document
   * @property {string} user_id - id of user that uploaded document
   * @property {string} document_name - name of document
   * @property {string} page_count - amount of pages in the document
   * @property {string} created - timestamp document was created
   * @property {string} updated - timestamp document was updated
   * @property {string} original_filename - original filename with document format (.pdf, .doc, etc...)
   * @property {?string} origin_document_id - an id of original document (if document is a copy)
   * @property {string} owner - email of document owner
   * @property {boolean} template - is document a template or not
   * @property {DocumentThumbnails} thumbnail - thumbnail urls with different sizes (small, medium, large)
   * @property {Object[]} signatures - signature signed elements
   * @property {Object[]} texts - text and enumeration filled elements
   * @property {Object[]} checks - checkbox checked elements
   * @property {Object[]} tags - field types document contains
   * @property {Object[]} fields - all document fillable fields
   * @property {Object[]} requests - requests for signing document
   * @property {Object[]} roles - document signer roles
   * @property {Object[]} field_invites - sent invites data
   * @property {number} version_time - document updated timestamp
   * @property {Object[]} enumeration_options - dropdown options
   * @property {Object[]} attachments - attachments in document
   * @property {Object[]} routing_details - signing steps routing details
   * @property {Object[]} integrations - document integrations
   * @property {Object[]} hyperlinks - document hyperlinks
   * @property {Object[]} radiobuttons - checked radiobuttons after document was signed
   * @property {Object[]} document_group_template_info - document group template&apos;s data
   * @property {Object[]} document_group_info - document group&apos;s data
   * @property {Object[]} originator_organization_settings - specific organization settings for document
   * @property {Object[]} field_validators - validation rules for fields (date fields, payment fields etc.)
   * @property {Object} settings - specific document settings
   * @property {string} parent_id - id of document folder
   * @property {string} originator_logo - logo url
   * @property {Object[]} pages - list of document pages with page sources and page size.
   */

  /**
   * Retrieves a document detailed data
   * @param {DocumentViewParams} data - view document details payload
   * @param {function(err: ApiErrorResponse, res: DocumentViewResponse)} [callback] - error first node.js callback
   */
  static view ({ id, token }, callback) {
    https
      .request(buildRequestOptions({
        method: &apos;GET&apos;,
        path: `/document/${id}`,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback))
      .end();
  }

  /**
   * @typedef {Object} SignatureField
   * @property {number} page_number - page number of document
   * @property {string} type - type of field (signature)
   * @property {string} name - unique name of the field
   * @property {string} role - role name
   * @property {boolean} required - required field
   * @property {number} height - height of the field
   * @property {number} width - width of the field
   * @property {number} x - X coordinate of the field
   * @property {number} y - Y coordinate of the field
   * @property {string} [label] - field label
   */

  /**
   * @typedef {Object} InitialsField
   * @property {number} page_number - page number of document
   * @property {string} type - type of field (initials)
   * @property {string} name - unique name of the field
   * @property {string} role - role name
   * @property {boolean} required - required field
   * @property {number} height - height of the field
   * @property {number} width - width of the field
   * @property {number} x - X coordinate of the field
   * @property {number} y - Y coordinate of the field
   * @property {string} [label] - field label
   */

  /**
   * @typedef {Object} TextField
   * @property {number} page_number - page number of document
   * @property {string} type - type of field (text)
   * @property {string} name - unique name of the field
   * @property {string} role - role name
   * @property {boolean} required - required field
   * @property {number} height - height of the field
   * @property {number} width - width of the field
   * @property {number} x - X coordinate of the field
   * @property {number} y - Y coordinate of the field
   * @property {string|number} [prefilled_text] - prefilled field value
   * @property {string} [validator_id] - field value validator ID
   * @property {string} [label] - field label
   */

  /**
   * @typedef {Object} CheckField
   * @property {number} page_number - page number of document
   * @property {string} type - type of field (checkbox)
   * @property {string} name - unique name of the field
   * @property {string} role - role name
   * @property {boolean} required - required field
   * @property {number} height - height of the field
   * @property {number} width - width of the field
   * @property {number} x - X coordinate of the field
   * @property {number} y - Y coordinate of the field
   * @property {boolean} [prefilled_text] - prefilled field value
   * @property {string} [label] - field label
   */

  /**
   * @typedef {Object} EnumerationField
   * @property {number} page_number - page number of document
   * @property {string} type - type of field (enumeration)
   * @property {string} name - unique name of the field
   * @property {string} role - role name
   * @property {boolean} required - required field
   * @property {number} height - height of the field
   * @property {number} width - width of the field
   * @property {number} x - X coordinate of the field
   * @property {number} y - Y coordinate of the field
   * @property {Array&lt;number|string&gt;} enumeration_options - choice options of enumerable field
   * @property {string|number} [prefilled_text] - prefilled field value
   * @property {string} [label] - field label
   * @property {boolean} [custom_defined_option=false] - if &apos;true&apos; user can change values, if &apos;false&apos; user can only read
   */

  /**
   * @typedef {Object} RadioButton
   * @property {number} page_number - page number of document
   * @property {number} height - height of the field
   * @property {number} width - width of the field
   * @property {number} x - X coordinate of the field
   * @property {number} y - Y coordinate of the field
   * @property {string} value - value of radio button
   * @property {string} checked - radio button check status
   * @property {number} created - redio button creation timestamp
   */

  /**
   * @typedef {Object} RadioButtonField
   * @property {number} page_number - page number of document
   * @property {string} type - type of field (radiobutton)
   * @property {string} name - unique name of the field
   * @property {string} role - role name
   * @property {boolean} required - required field
   * @property {number} height - height of the field
   * @property {number} width - width of the field
   * @property {number} x - X coordinate of the field
   * @property {number} y - Y coordinate of the field
   * @property {RadioButton[]} radio - array of radio buttons
   * @property {string|number} [prefilled_text] - prefilled field value
   * @property {string} [label] - field label
   */

  /**
   * @typedef {Object} FormulaTreeBranchTerminator
   * @property {string} term - name of field which will participate in calculation formula
   */

  /**
   * @typedef {Object} FormulaTreeBranch
   * @property {FormulaTree} term - a part of formula parsed into tree
   */

  /**
   * @typedef {Object} FormulaTree
   * @property {string} operator - arithmetic operator&apos;s token
   * @property {FormulaTreeBranch|FormulaTreeBranchTerminator} left - left branch of formula tree
   * @property {FormulaTreeBranch|FormulaTreeBranchTerminator} right - right branch of formula tree
   */

  /**
   * @typedef {Object} CalculatedField
   * @property {number} page_number - page number of document
   * @property {string} type - type of field (text)
   * @property {string} name - unique name of the field
   * @property {string} role - role name
   * @property {boolean} required - required field
   * @property {number} height - height of the field
   * @property {number} width - width of the field
   * @property {number} x - X coordinate of the field
   * @property {number} y - Y coordinate of the field
   * @property {string} formula - arithmetic formula, e.g. &apos;TextName+EnumerationName&apos;
   * @property {FormulaTree} calculation_formula - formula parsed into tree
   * @property {number} calculation_precision - calculation precision
   * @property {string} [label] - field label
   * @property {boolean} [custom_defined_option=false] - if &apos;true&apos; user can change values, if &apos;false&apos; user can only read
   */

  /**
   * @typedef {Object} AttachmentField
   * @property {number} page_number - page number of document
   * @property {string} type - type of field (attachment)
   * @property {string} name - unique name of the field
   * @property {string} role - role name
   * @property {boolean} required - required field
   * @property {number} height - height of the field
   * @property {number} width - width of the field
   * @property {number} x - X coordinate of the field
   * @property {number} y - Y coordinate of the field
   * @property {string} [label] - field label
   */

  /**
   * @typedef {Object} DocumentFields
   * @property {number} client_timestamp - local time of user
   * @property {Array&lt;SignatureField|InitialsField|TextField|CheckField|EnumerationField|RadioButtonField|CalculatedField|AttachmentField&gt;} fields - all types of fields
   */

  /**
   * Update document payload
   * @typedef {Object} DocumentUpdateParams
   * @property {string} id - id of specific document
   * @property {DocumentFields} fields - set of fields
   * @property {string} token - your auth token
   */

  /**
   * Update document response data
   * @typedef {Object} DocumentUpdateResponse
   * @property {string} id - an id of document
   * @property {Object[]} signatures - signature and initial elements
   * @property {Object[]} texts - text and enumeration elements
   * @property {Object[]} checks - checkbox elements
   * @property {Object[]} attachments - attachment elements
   * @property {Object[]} radiobuttons - radiobutton elements
   */

  /**
   * Updates an existing document.
   * Adds fields (signature, text, initials, checkbox, radiobutton group, calculated) and elements (signature, text, check).
   * Every call of this method will add only specified fields into document.
   * Old fields will be removed
   * @param {DocumentUpdateParams} data - update document request payload
   * @param {function(err: ApiErrorResponse, res: DocumentUpdateResponse)} [callback] - error first node.js callback
   */
  static update ({
    id,
    fields,
    token,
  }, callback) {
    const JSONData = JSON.stringify(fields);
    const req = https
      .request(buildRequestOptions({
        method: &apos;PUT&apos;,
        path: `/document/${id}`,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
        headers: {
          &apos;Content-Type&apos;: &apos;application/json&apos;,
          &apos;Content-Length&apos;: Buffer.byteLength(JSONData),
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback));

    req.write(JSONData);
    req.end();
  }

  /**
   * Download document optional settings
   * @typedef {Object} DocumentDownloadOptions
   * @property {boolean} [collapsed=true] - if true document will be downloaded with embedded field and element values
   * @property {boolean} [withHistory=false] - if true document will be downloaded with history
   */

  /**
   * Document download payload
   * @typedef {Object} DocumentDownloadParams
   * @property {string} id - id of specific document
   * @property {string} token - your auth token
   * @property {DocumentDownloadOptions} options - download document optional settings
   */

  /**
   * Document binary data
   * @typedef {Buffer} DocumentDownloadResponse
   */

  /**
   * Downloads document with embedded fields and elements.
   * By default document is downloaded without history. To download document with history set `withHistory` option to `true`.
   * @param {DocumentDownloadParams} data - download document request payload
   * @param {function(err: ApiErrorResponse, res: DocumentDownloadResponse)} [callback] - error first node.js callback
   */

  static download ({
    id,
    token,
    options: {
      collapsed = true,
      withHistory = false,
    } = {},
  }, callback) {
    const queryParams = {};
    const clientTimestamp = Math.floor(Date.now() / 1000);

    collapsed &amp;&amp; (queryParams.type = &apos;collapsed&apos;);
    withHistory &amp;&amp; (queryParams.with_history = &apos;1&apos;);

    https
      .request(buildRequestOptions({
        method: &apos;GET&apos;,
        path: `/document/${id}/download?client_timestamp=${clientTimestamp}&amp;${stringifyQueryParams(queryParams)}`,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback))
      .end();
  }

  /**
   * Document share payload
   * @typedef {Object} DocumentShareParams
   * @property {string} id - id of specific document
   * @property {string} token - your auth token
   */

  /**
   * Document share response data
   * @typedef {Object} DocumentShareResponse
   * @property {string} link - link to download specified document in PDF format
   */

  /**
   * Requests a link to download document with embedded fields and elements
   * Link can be used once and then will expire
   * @param {DocumentShareParams} data - share document request payload
   * @param {function(err: ApiErrorResponse, res: DocumentShareResponse)} [callback] - error first node.js callback
   */
  static share ({ id, token }, callback) {
    https
      .request(buildRequestOptions({
        method: &apos;POST&apos;,
        path: `/document/${id}/download/link`,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback))
      .end();
  }

  /**
   * Document invite signer settings
   * @typedef {Object} SignerSettings
   * @property {string} email - signer&apos;s email
   * @property {string} role - role name
   * @property {string} [role_id] - role unique id (can be discovered in document details)
   * @property {number} order - role signing order
   * @property {string} reassign - allow reassign signer
   * @property {string} decline_by_signature - signer can decline invite
   * @property {number} reminder - remind via email in days
   * @property {number} expiration_days - expiration of invite in days
   * @property {string} [subject] - specify subject of email
   * @property {string} [message] - specify body of email
   */

  /**
   * Document invite settings
   * @typedef {Object} DocumentInviteSettings
   * @property {string} from - email of sender
   * @property {SignerSettings[]|string} to - array of signers or email of single signer
   * @property {string} [document_id] - an id of document
   * @property {string[]} [cc] - array with emails of copy receivers
   * @property {string} [subject] - specify subject of email
   * @property {string} [message] - specify body of email
   * @property {string} [on_complete] - on signing complete action
   */

  /**
   * Document invite optional settings
   * @typedef {Object} DocumentInviteOptions
   * @property {string} [email] - ability to disable invitation by email. to disabale email assign value &apos;disable&apos;
   */

  /**
   * Create document invite payload
   * @typedef {Object} DocumentInviteParams
   * @property {string} id - an id of document
   * @property {DocumentInviteSettings} data - document invite settings
   * @property {DocumentInviteOptions} [options] - document invite optional settings
   * @property {string} token - your auth token
   */

  /**
   * Create document field invite response data
   * @typedef {Object} DocumentFieldInviteResponse
   * @property {string} status - status of invitation, e.g. &apos;success&apos;
   */

  /**
   * Create document free form invite response data
   * @typedef {Object} DocumentFreeformInviteResponse
   * @property {string} result - free form invitation result, e.g. &apos;success&apos;
   * @property {string} id - unique id of invite
   * @property {string} callback_url - url for front-end redirect or &apos;none&apos;
   */

  /**
   * Create document invite response data
   * @typedef {DocumentFieldInviteResponse|DocumentFreeformInviteResponse} DocumentInviteResponse
   */

  /**
   * Creates an invite to sign a document.
   * You can create a simple free form invite(s) or a role-based invite(s).
   * @param {DocumentInviteParams} data - create document invite payload
   * @param {function(err: ApiErrorResponse, res: DocumentInviteResponse)} [callback] - error first node.js callback
   */
  static invite ({
    id,
    data,
    options: { email } = {},
    token,
  }, callback) {
    const inviteData = Object.assign({}, data, { document_id: id });

    try {
      inviteData.to.forEach(signer =&gt; {
        signer.role_id = signer.role_id || &apos;&apos;;
      });
    } catch (err) {
      callback(err);
      return;
    }

    const JSONData = JSON.stringify(inviteData);
    let path = `/document/${id}/invite`;

    if (email === &apos;disable&apos;) {
      path = `${path}?email=disable`;
    }

    const req = https
      .request(buildRequestOptions({
        method: &apos;POST&apos;,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
        headers: {
          &apos;Content-Type&apos;: &apos;application/json&apos;,
          &apos;Content-Length&apos;: Buffer.byteLength(JSONData),
        },
        path,
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback));

    req.write(JSONData);
    req.end();
  }

  /**
   * Cancel freeform invite payload
   * @typedef {Object} CancelFreeformInviteParams
   * @property {string} id - unique id of invite
   * @property {string} token - your auth token
   */

  /**
   * Cancel freeform invite response data
   * @typedef {Object} CancelFreeformInviteResponse
   * @property {string} id - unique id of invite
   */

  /**
   * Cancels sent freeform invite
   * @param {CancelFreeformInviteParams} data - cancel freeform invite payload
   * @param {function(err: ApiErrorResponse, res: CancelFreeformInviteResponse)} [callback] - error first node.js callback
   */
  static cancelFreeFormInvite ({ id, token }, callback) {
    https
      .request(buildRequestOptions({
        method: &apos;PUT&apos;,
        path: `/invite/${id}/cancel`,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback))
      .end();
  }

  /**
   * Cancel document field invite payload
   * @typedef {Object} DocumentFieldInviteCancelParams
   * @property {string} id - an id of document
   * @property {string} token - your auth token
   */

  /**
   * Cancel document field invite response data
   * @typedef {Object} DocumentFieldInviteCancelResponse
   * @property {string} status - status of field invite cancellation, e.g. &apos;success&apos;
   */

  /**
   * Cancels an invite to a document
   * @param {DocumentFieldInviteCancelParams} data - cancel field invite payload
   * @param {function(err: ApiErrorResponse, res: DocumentFieldInviteCancelResponse)} [callback] - error first node.js callback
   */
  static cancelFieldInvite ({ id, token }, callback) {
    https
      .request(buildRequestOptions({
        method: &apos;PUT&apos;,
        path: `/document/${id}/fieldinvitecancel`,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback))
      .end();
  }

  /**
   * Cancels an invite to a document
   * @deprecated use Document.cancelFieldInvite instead of this
   * @param {DocumentFieldInviteCancelParams} data - cancel field invite payload
   * @param {function(err: ApiErrorResponse, res: DocumentFieldInviteCancelResponse)} [callback] - error first node.js callback
   */
  static cancelInvite ({ id, token }, callback) {
    Document.cancelFieldInvite({
      id,
      token,
    }, callback);
  }

  /**
   * Merge documents optional settings
   * @typedef {Object} DocumentMergeOptions
   * @property {boolean} [removeOriginalDocuments=false] - if true original documents will be removed
   */

  /**
   * Merge documents payload
   * @typedef {Object} DocumentMergeParams
   * @property {string} token - your auth token
   * @property {string} name - new name for merged document
   * @property {string[]} document_ids - an array of document IDs
   * @property {DocumentMergeOptions} options - merge documents optional settings
   */

  /**
   * Merge documents response data
   * @typedef {Object} DocumentMergeResponse
   * @property {string} document_id - an ID of merged document
   */

  /**
   * Merges existing documents into one.
   * By default original documents are not removed after merging. To remove original documents set `removeOriginalDocuments` option to `true`.
   * @param {DocumentMergeParams} data - merge documents payload
   * @param {function(err: ApiErrorResponse, res: DocumentMergeResponse)} [originalCallback] - error first node.js callback
   */
  static merge ({
    name,
    document_ids,
    options: { removeOriginalDocuments = false } = {},
    token,
  }, originalCallback) {
    const JSONData = JSON.stringify({
      upload_document: true,
      document_ids,
      name,
    });

    const callbackWithDocumentDeletion = (mergeErr, mergeRes) =&gt; {
      if (mergeErr) {
        originalCallback(mergeErr);
        return;
      } else {

        const removeDocument = ({ id }) =&gt; new Promise((resolve, reject) =&gt; {
          Document.remove({
            id,
            token,
          }, (err, res) =&gt; {
            if (err) {
              reject(err);
            } else {
              resolve(res.status === &apos;success&apos;);
            }
          });
        });

        const documentsDeleted = document_ids
          .map(id =&gt; removeDocument({ id }));

        Promise.all(documentsDeleted)
          .then(deletionStatuses =&gt; deletionStatuses.reduce((generalStatus, currentStatus) =&gt; (generalStatus &amp;&amp; currentStatus), true))
          .then(allDocumentsDeleted =&gt; {
            if (allDocumentsDeleted) {
              originalCallback(null, mergeRes);
              return;
            } else {
              throw new Error(&apos;Some of the original documents were not removed&apos;);
            }
          })
          .catch(removeErr =&gt; {
            originalCallback(removeErr);
            return;
          });

      }
    };

    const callback = removeOriginalDocuments
      ? callbackWithDocumentDeletion
      : originalCallback;

    const req = https
      .request(buildRequestOptions({
        method: &apos;POST&apos;,
        path: &apos;/document/merge&apos;,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
        headers: {
          &apos;Content-Type&apos;: &apos;application/json&apos;,
          &apos;Content-Length&apos;: Buffer.byteLength(JSONData),
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(originalCallback));

    req.write(JSONData);
    req.end();
  }

  /**
   * Document history payload
   * @typedef {Object} DocumentHistoryParams
   * @property {string} id - id of specific document
   * @property {string} token - your auth token
   */

  /**
   * Document action log item
   * @typedef {Object} DocumentEvent
   * @property {string} client_app_name - name of a client application
   * @property {?string} client_timestamp - client application timestamp
   * @property {string} created - timestamp of action creation
   * @property {string} email - email of an actor
   * @property {string} event - name of event
   * @property {string} ip_address - actor&apos;s IP address
   * @property {?string} element_id - an ID of specific element
   * @property {?string} field_id - an ID of specific field
   * @property {?string} json_attributes - field attributes (e.g. font, style, size etc.)
   * @property {string} [document_id] - an ID of specific document
   * @property {string} [origin] - an origin of document
   * @property {string} [unique_id] - an ID of event
   * @property {string} [user_agent] - user agent
   * @property {string} [user_id] - id of an actor
   * @property {string} [version] - version of signed document (incremented after each signature addition)
   */

  /**
   * Document history response data
   * @typedef {DocumentEvent[]} DocumentHistoryResponse
   */

  /**
   * Retrieves a document action log (history) data
   * @param {DocumentHistoryParams} data -  payload
   * @param {function(err: ApiErrorResponse, res: DocumentHistoryResponse)} [callback] - error first node.js callback
   */
  static history ({ id, token }, callback) {
    https
      .request(buildRequestOptions({
        method: &apos;GET&apos;,
        path: `/document/${id}/history`,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(callback))
      .end();
  }

  /**
   * Document remove optional settings
   * @typedef {Object} DocumentRemoveOptions
   * @property {boolean} [cancelInvites=false] - ability to cancel all document invites during deletion
   */

  /**
   * Remove document payload
   * @typedef {Object} DocumentRemoveParams
   * @property {string} id - id of specific document
   * @property {string} token - your auth token
   * @property {DocumentRemoveOptions} [options] - document remove optional settings
   */

  /**
   * Remove document response data
   * @typedef {Object} DocumentRemoveResponse
   * @property {string} status - status of deletion, e.g. &apos;success&apos;
   */

  /**
   * Removes a specified document from folder
   * @param {DocumentRemoveParams} data - remove document payload
   * @param {function(err: ApiErrorResponse, res: DocumentRemoveResponse)} [originalCallback] - error first node.js callback
   */
  static remove ({
    id: documentId,
    token,
    options: { cancelInvites = false } = {},
  }, originalCallback) {
    const callbackWithInviteCancellation = (removeErr, removeRes) =&gt; {
      if (removeErr) {
        originalCallback(removeErr);
        return;
      } else {
        promisify(Document.view)({
          id: documentId,
          token,
        })
          .then(document =&gt; {
            const { field_invites: fieldInvites, requests: freeformInvites } = document;
            return {
              fieldInvites,
              freeformInvites,
            };
          })
          .then(({ fieldInvites, freeformInvites }) =&gt; {
            const fieldInvitesCancelled = new Promise(resolve =&gt; {
              if (Array.isArray(fieldInvites) &amp;&amp; fieldInvites.length) {
                resolve(promisify(Document.cancelFieldInvite)({
                  id: documentId,
                  token,
                }));
              } else {
                resolve({ status: &apos;success&apos; });
              }
            })
              .then(({ status }) =&gt; status === &apos;success&apos;);

            const freeformInvitesCancelled = freeformInvites
              .map(({ id: inviteId }) =&gt; {
                return promisify(Document.cancelFreeFormInvite)({
                  id: inviteId,
                  token,
                })
                  .then(({ id }) =&gt; !!id);
              });

            Promise.all([
              fieldInvitesCancelled,
              ...freeformInvitesCancelled,
            ])
              .then(allInvitesCancelled =&gt; {
                if (allInvitesCancelled) {
                  originalCallback(null, removeRes);
                  return;
                } else {
                  throw new Error(&apos;Some of invites have not been cancelled&apos;);
                }
              })
              .catch(err =&gt; {
                originalCallback(err.message);
                return;
              });
          });
      }
    };

    const callback = cancelInvites
      ? callbackWithInviteCancellation
      : originalCallback;

    https
      .request(buildRequestOptions({
        method: &apos;DELETE&apos;,
        path: `/document/${documentId}`,
        authorization: {
          type: &apos;Bearer&apos;,
          token,
        },
      }), responseHandler(callback))
      .on(&apos;error&apos;, errorHandler(originalCallback))
      .end();
  }
}

module.exports = Document;
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
